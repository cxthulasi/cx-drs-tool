{
  "dashboard": {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": null,
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "gnetId": null,
    "graphTooltip": 0,
    "iteration": 1732161247885,
    "links": [
      {
        "icon": "dashboard",
        "includeVars": false,
        "keepTime": true,
        "tags": [],
        "targetBlank": true,
        "title": "P13N AB Service",
        "tooltip": "Open AB Service Dashboard",
        "type": "link",
        "url": "https://grafana.hotstar.com/d/969-E-uWk/personalisation-ab-service?orgId=1"
      },
      {
        "asDropdown": true,
        "icon": "external link",
        "includeVars": false,
        "keepTime": true,
        "tags": [
          "P13N",
          "RECO"
        ],
        "targetBlank": true,
        "title": "P13N Dashboards",
        "type": "dashboards"
      }
    ],
    "panels": [
      {
        "datasource": null,
        "description": "",
        "fieldConfig": {
          "defaults": {},
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 57,
        "links": [],
        "maxDataPoints": 1360,
        "options": {
          "content": "**[Editorial Tray Service](https://hotstar.atlassian.net/wiki/spaces/HP2/pages/3603857439/Ranking+collection+editorial+trays)** is ranking the contents in editorial tray. It shares the algo code with tpfy svc.\n\n\nThe config of the dashboard is [editorial-tray-i18n.json](https://github.com/hotstar/kube-grafana/blob/master/grafana-dashboards/p13n/editorial-tray-i18n.json). The metrics below are queried from Prometheus. The data are from [persona-reco-service](https://github.com/hotstar/persona-reco-service).",
          "mode": "markdown"
        },
        "pluginVersion": "7.5.17",
        "title": "Overview",
        "type": "text"
      },
      {
        "collapsed": true,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 3
        },
        "id": 10,
        "maxDataPoints": 1360,
        "panels": [
          {
            "alert": {
              "alertRuleTags": {},
              "conditions": [
                {
                  "evaluator": {
                    "params": [
                      75
                    ],
                    "type": "gt"
                  },
                  "operator": {
                    "type": "and"
                  },
                  "query": {
                    "params": [
                      "B",
                      "5m",
                      "now"
                    ]
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                }
              ],
              "executionErrorState": "alerting",
              "for": "5m",
              "frequency": "1m",
              "handler": 1,
              "name": "CPU Usage alert",
              "noDataState": "no_data",
              "notifications": [
                {
                  "uid": "-PsqDaZIk"
                }
              ]
            },
            "aliasColors": {
              "10.100.61.141:10250": "purple"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 4
            },
            "hiddenSeries": false,
            "id": 2,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": false,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", pod=~\"$service.*\", source_cluster=\"$cluster\"}[1m])",
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{pod}}",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "rate(container_cpu_usage_seconds_total{namespace=\"personalisation\", pod=~\"discovery-editorial-tray.*\", source_cluster=~\"hs-eks-prod6-api-apse1|hs-eks-prod-api-euw1\"}[1m])",
                "hide": true,
                "interval": "60",
                "legendFormat": "cpu_usage_alert",
                "refId": "B"
              }
            ],
            "thresholds": [
              {
                "colorMode": "critical",
                "fill": true,
                "line": true,
                "op": "gt",
                "value": 75,
                "visible": true
              }
            ],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "CPU Usage",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "transformations": [],
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:237",
                "decimals": null,
                "format": "short",
                "label": "CPU usage percentage",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:238",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "10.100.61.141:10250": "purple"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 4
            },
            "hiddenSeries": false,
            "id": 4,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": false,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "container_memory_usage_bytes{namespace=\"$namespace\", pod=~\"$service.*\", source_cluster=\"$cluster\"}",
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{pod}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Memory Usage",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:287",
                "format": "bytes",
                "label": "memory usage percentage",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:288",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 12
            },
            "hiddenSeries": false,
            "id": 6,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": false,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "rate(jvm_gc_collection_seconds_sum{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{pod}} ({{gc}})",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "GC Time",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:385",
                "format": "s",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:386",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": 0
            }
          },
          {
            "alert": {
              "alertRuleTags": {},
              "conditions": [
                {
                  "evaluator": {
                    "params": [
                      1
                    ],
                    "type": "gt"
                  },
                  "operator": {
                    "type": "and"
                  },
                  "query": {
                    "params": [
                      "C",
                      "5m",
                      "now"
                    ]
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                }
              ],
              "executionErrorState": "alerting",
              "for": "5m",
              "frequency": "1m",
              "handler": 1,
              "message": "Global Deployment Editorial Tray Service container error",
              "name": "Container Error Alert",
              "noDataState": "keep_state",
              "notifications": [
                {
                  "uid": "mI81hOXMk"
                },
                {
                  "uid": "-PsqDaZIk"
                }
              ]
            },
            "aliasColors": {},
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 12
            },
            "hiddenSeries": false,
            "id": 8,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "hideEmpty": false,
              "hideZero": false,
              "max": false,
              "min": false,
              "rightSide": true,
              "show": true,
              "sideWidth": null,
              "total": false,
              "values": true
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": false
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [
              {
                "$$hashKey": "object:433",
                "alias": "terminated - total",
                "bars": false,
                "fill": 0,
                "legend": false,
                "linewidth": 1,
                "stack": false,
                "yaxis": 2
              }
            ],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum by (reason) (increase(kube_pod_container_status_terminated_reason{namespace=\"$namespace\", pod=~\"$service.*\", source_cluster=\"$cluster\"}[1m]))",
                "interval": "60",
                "legendFormat": "terminated - {{reason}}",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "sum by (reason) (increase(kube_pod_container_status_waiting_reason{namespace=\"$namespace\", pod=~\"$service.*\", source_cluster=\"$cluster\"}[1m]))",
                "hide": true,
                "interval": "60",
                "legendFormat": "waiting - {{reason}}",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(kube_pod_container_status_terminated_reason{namespace=\"personalisation\", pod=~\"discovery-editorial-tray.*\", source_cluster=\"hs-eks-prod6-api-apse1\"}[1m]))",
                "hide": false,
                "interval": "60",
                "legendFormat": "terminated - total",
                "refId": "C"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(kube_pod_container_status_waiting_reason{container=\"$service\"}[1m]))",
                "hide": true,
                "interval": "60",
                "legendFormat": "waiting - total",
                "refId": "D"
              }
            ],
            "thresholds": [
              {
                "colorMode": "critical",
                "fill": false,
                "line": false,
                "op": "gt",
                "value": 1,
                "visible": true
              }
            ],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Container Error Count (stacked) [Alert]",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:450",
                "decimals": 0,
                "format": "none",
                "label": "number of error",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:451",
                "decimals": 0,
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "failure": "red",
              "success": "green"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 9,
              "w": 24,
              "x": 0,
              "y": 20
            },
            "hiddenSeries": false,
            "id": 69,
            "legend": {
              "alignAsTable": false,
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_request_latency_ms_count{namespace=\"$namespace\", pod=~\"$service.*\"}[1m])) / sum(rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", pod=~\"$service.*\"}[1m]))",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "RPM",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Average RPM For Each Core (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:502",
                "decimals": 0,
                "format": "rpm",
                "label": "request count per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:503",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "repeat": null,
        "title": "Container",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 4
        },
        "id": 133,
        "maxDataPoints": 1360,
        "panels": [
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 5
            },
            "hiddenSeries": false,
            "id": 125,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": false,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "rate(container_cpu_usage_seconds_total{namespace=\"$namespace\",container=\"$tfServingContainer\"}[1m])",
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{instance}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "CPU Usage",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:580",
                "decimals": null,
                "format": "short",
                "label": "number of cores",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:581",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 5
            },
            "hiddenSeries": false,
            "id": 127,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": false,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "container_memory_max_usage_bytes{namespace=\"$namespace\",container=\"$tfServingContainer\", source_cluster=\"$cluster\"}",
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{instance}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Memory Usage",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:630",
                "format": "bytes",
                "label": "memory usage percentage",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:631",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "tray-ranking (deadline_exceeded)": "red",
              "tray-ranking (ok)": "#7FFF00",
              "tray-ranking-mtl-click-watch-wt (deadline_exceeded)": "light-red",
              "tray-ranking-mtl-click-watch-wt (ok)": "semi-dark-green",
              "tray-ranking-mtl-thres0 (ok)": "super-light-green",
              "tray-ranking-mtl-thres0-esmm (ok)": "dark-green",
              "tray-ranking-mtl-topcid (deadline_exceeded)": "dark-red",
              "tray-ranking-mtl-topcid (ok)": "super-light-green",
              "tray-ranking-session-1d (deadline_exceeded)": "rgb(184, 21, 22)",
              "tray-ranking-session-1d (ok)": "light-green"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 13
            },
            "hiddenSeries": false,
            "id": 129,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": false,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [
              {
                "$$hashKey": "object:678",
                "alias": "tray-ranking-mtl-click-watch-wt (deadline_exceeded)",
                "yaxis": 1
              }
            ],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_tensorflow_predict_time_ms_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (status, model)",
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{model}} ({{status}})",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Rank Volume (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:685",
                "decimals": 0,
                "format": "rpm",
                "label": "prediction count per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:686",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 13
            },
            "hiddenSeries": false,
            "id": 131,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.5, sum(rate(p13n_reco_tensorflow_predict_time_ms_bucket{namespace=\"$namespace\", service=\"$service\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p50",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9, sum(rate(p13n_reco_tensorflow_predict_time_ms_bucket{namespace=\"$namespace\", service=\"$service\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p90",
                "queryType": "randomWalk",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.5, sum(rate(p13n_reco_tensorflow_predict_time_ms_bucket{namespace=\"$namespace\", service=\"$service\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p99",
                "queryType": "randomWalk",
                "refId": "C"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_tensorflow_predict_time_ms_sum{namespace=\"$namespace\", service=\"$service\"}[1m])) / sum(increase(p13n_reco_tensorflow_predict_time_ms_count{namespace=\"$namespace\", service=\"$service\"}[1m]))",
                "hide": true,
                "interval": "60",
                "legendFormat": "avg",
                "queryType": "randomWalk",
                "refId": "D"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Rank Latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:835",
                "decimals": null,
                "format": "ms",
                "label": "rank latency time",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:836",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 6,
              "x": 0,
              "y": 21
            },
            "hiddenSeries": false,
            "id": 167,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(tensorflow_serving_service_predict_time_ms_count{namespace=\"$namespace\", service=\"$tfServingContainer\", source_cluster=\"$cluster\"}[1m])) by (pod)",
                "interval": "60",
                "legendFormat": "{{pod}}",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Pod Request Volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:886",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:887",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 6,
              "x": 6,
              "y": 21
            },
            "hiddenSeries": false,
            "id": 165,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(tensorflow_serving_service_predict_time_ms_count{namespace=\"$namespace\", service=\"$tfServingContainer\"}[1m])) by (model, status)",
                "interval": "60",
                "legendFormat": "{{model}}:{{status}}",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Model Request Volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:941",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:942",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 21
            },
            "hiddenSeries": false,
            "id": 169,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.5, sum(rate(tensorflow_serving_service_predict_time_ms_bucket{namespace=\"$namespace\",service=\"$tfServingContainer\",source_cluster=\"$cluster\"}[1m])) by (le, model))",
                "interval": "60",
                "legendFormat": "{{model}}-p50",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.90, sum(rate(tensorflow_serving_service_predict_time_ms_bucket{namespace=\"$namespace\",service=\"$tfServingContainer\",source_cluster=\"$cluster\"}[1m])) by (le, model))",
                "interval": "60",
                "legendFormat": "{{model}}-p90",
                "queryType": "randomWalk",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(tensorflow_serving_service_predict_time_ms_bucket{namespace=\"$namespace\",service=\"$tfServingContainer\",source_cluster=\"$cluster\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p99",
                "queryType": "randomWalk",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Predict API latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:996",
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:997",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "title": "TF Serving",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 5
        },
        "id": 163,
        "maxDataPoints": 1360,
        "panels": [
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 6
            },
            "hiddenSeries": false,
            "id": 189,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum by (cache_status) (increase(p13n_reco_mget_fetch_cache_count_total{namespace=\"$namespace\",service=\"$service\",source_cluster=\"$cluster\"}[1m]))",
                "hide": false,
                "interval": "60",
                "legendFormat": "{{cache_status}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Cache Fetch Volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1319",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:1320",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 6
            },
            "hiddenSeries": false,
            "id": 190,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_mget_save_count_total{namespace=\"$namespace\",service=\"$service\",source_cluster=\"$cluster\"}[1m]))",
                "hide": false,
                "interval": "60",
                "legendFormat": "sum",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Cache Save Volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1319",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:1320",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 14
            },
            "hiddenSeries": false,
            "id": 159,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "aws_ec_cache_hits_average{dimension_CacheClusterId=~\"p13n-editorial-tray.*\"}",
                "interval": "60",
                "legendFormat": "{{dimension_CacheClusterId}}  Hits",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "aws_ec_cache_misses_average{dimension_CacheClusterId=~\"p13n-editorial-tray.*\"}",
                "interval": "60",
                "legendFormat": "{{dimension_CacheClusterId}} miss",
                "queryType": "randomWalk",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Request Count",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1691",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:1692",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 14
            },
            "hiddenSeries": false,
            "id": 191,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "aws_ec_curr_connections_average{dimension_CacheClusterId=~\"p13n-editorial-tray.*\"}",
                "interval": "60",
                "legendFormat": "{{dimension_CacheClusterId}}  Hits",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Current Connections",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1691",
                "format": "percent",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:1692",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 22
            },
            "hiddenSeries": false,
            "id": 157,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "aws_ec_engine_cpuutilization_average{dimension_CacheClusterId=~\"p13n-editorial-tray.*\"}",
                "hide": false,
                "interval": "60",
                "legendFormat": "{{dimension_CacheClusterId}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Engine CPU utilization ",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1319",
                "format": "percent",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:1320",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 22
            },
            "hiddenSeries": false,
            "id": 161,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "aws_ec_cpuutilization_average{dimension_CacheClusterId=~\"p13n-editorial-tray.*\"}",
                "interval": "60",
                "legendFormat": "{{dimension_CacheClusterId}}",
                "queryType": "randomWalk",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "CPU utilization ",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1475",
                "format": "percent",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:1476",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 30
            },
            "hiddenSeries": false,
            "id": 155,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "aws_ec_freeable_memory_average{dimension_CacheClusterId=~\"p13n-editorial-tray.*\"}",
                "interval": "60",
                "legendFormat": "{{dimension_CacheClusterId}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Freeable memory average",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1636",
                "format": "bytes",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:1637",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 30
            },
            "hiddenSeries": false,
            "id": 192,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "aws_ec_bytes_used_for_cache_average{dimension_CacheClusterId=~\"p13n-editorial-tray.*\"}",
                "interval": "60",
                "legendFormat": "{{dimension_CacheClusterId}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Bytes Used For Cache",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1636",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:1637",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 38
            },
            "hiddenSeries": false,
            "id": 160,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "aws_ec_evictions_average{dimension_CacheClusterId=~\"p13n-editorial-tray.*\"}",
                "interval": "60",
                "legendFormat": "{{dimension_CacheClusterId}} ",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Evictions ",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1746",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:1747",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "title": "Redis",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 6
        },
        "id": 67,
        "maxDataPoints": 1360,
        "panels": [
          {
            "aliasColors": {
              "online": "blue"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 7
            },
            "hiddenSeries": false,
            "id": 63,
            "interval": "60",
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [
              {
                "$$hashKey": "object:1875",
                "alias": "ab-online",
                "bars": false,
                "lines": true,
                "stack": false
              }
            ],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(throttler_request_total{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m]))",
                "format": "time_series",
                "hide": true,
                "instant": false,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "total",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(throttler_request_total{namespace=\"$namespace\",  service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (throttle)",
                "hide": false,
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{throttle}}",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(throttle_ab_degradation_result_total{namespace=\"$namespace\",  service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (throttle)",
                "hide": true,
                "interval": "60",
                "legendFormat": "ab-{{throttle}}",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Throttler Volume (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1886",
                "decimals": 0,
                "format": "short",
                "label": "number of throttle result",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:1887",
                "decimals": 0,
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "online": "blue"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 7
            },
            "hiddenSeries": false,
            "id": 180,
            "interval": "60",
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "rightSide": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": false
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(throttle_ab_degradation_result_total{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (throttle)",
                "hide": false,
                "interval": "60",
                "legendFormat": "ab-{{throttle}}",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "AB Degradation Volume (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:157",
                "decimals": 0,
                "format": "short",
                "label": "number of throttle result",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:158",
                "decimals": 0,
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 15
            },
            "hiddenSeries": false,
            "id": 59,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "throttler_concurrency{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{pod}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Throttle Concurrency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:2118",
                "decimals": 0,
                "format": "short",
                "label": "concurrency of throttler",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:2119",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 15
            },
            "hiddenSeries": false,
            "id": 61,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "throttler_possibility_percentage{namespace=\"$namespace\",  service=\"$service\", source_cluster=\"$cluster\"}",
                "interval": "60",
                "legendFormat": "{{pod}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Throttler Possibility",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:2169",
                "decimals": 0,
                "format": "percent",
                "label": "throttle probability ",
                "logBase": 1,
                "max": "200",
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:2170",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 23
            },
            "hiddenSeries": false,
            "id": 171,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum by (id) (increase(p13n_reco_cohort_id_count_total{namespace=\"$namespace\",service=\"$service\",source_cluster=\"$cluster\"}[1m]))",
                "interval": "60",
                "legendFormat": "{{id}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Cohort ID",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:2220",
                "decimals": 0,
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:2221",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "VIP_USER": "super-light-purple"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 23
            },
            "hiddenSeries": false,
            "id": 65,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": true,
              "max": true,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": true,
              "values": true
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(throttler_request_total{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (user)",
                "hide": false,
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{user}}",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(throttler_request_total{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (user, throttle)",
                "hide": true,
                "interval": "60",
                "legendFormat": "{{user}}-{{throttle}}",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Subs Type (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:2272",
                "decimals": 0,
                "format": "short",
                "label": "number of user",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:2273",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "title": "Throttler Request",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 7
        },
        "id": 105,
        "maxDataPoints": 1360,
        "panels": [
          {
            "alert": {
              "alertRuleTags": {},
              "conditions": [
                {
                  "evaluator": {
                    "params": [
                      200
                    ],
                    "type": "gt"
                  },
                  "operator": {
                    "type": "and"
                  },
                  "query": {
                    "params": [
                      "C",
                      "5m",
                      "now"
                    ]
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                },
                {
                  "evaluator": {
                    "params": [
                      0.1
                    ],
                    "type": "gt"
                  },
                  "operator": {
                    "type": "or"
                  },
                  "query": {
                    "params": [
                      "D",
                      "5m",
                      "now"
                    ]
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                }
              ],
              "executionErrorState": "alerting",
              "for": "5m",
              "frequency": "1m",
              "handler": 1,
              "message": "Global Deployment Editorial Tray Service gets too many requests failed or throttled",
              "name": "RPC Volume Alert",
              "noDataState": "keep_state",
              "notifications": [
                {
                  "uid": "mI81hOXMk"
                },
                {
                  "uid": "-PsqDaZIk"
                }
              ]
            },
            "aliasColors": {
              "cached": "orange",
              "cached-cache_exhausted": "super-light-red",
              "cached-cache_miss": "light-red",
              "cached-failure": "semi-dark-red",
              "cached-success": "semi-dark-green",
              "failure": "red",
              "request-failure": "dark-red",
              "request-success": "dark-green",
              "success": "green"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 8
            },
            "hiddenSeries": false,
            "id": 89,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": false
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [
              {
                "$$hashKey": "object:2352",
                "alias": "cached",
                "bars": false,
                "fill": 2,
                "lines": true
              },
              {
                "$$hashKey": "object:2353",
                "alias": "request-failure",
                "yaxis": 2,
                "zindex": 3
              }
            ],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_request_latency_ms_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (status)",
                "interval": "60",
                "legendFormat": "request-{{status}}",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_request_latency_ms_count{namespace=\"personalisation\", service=\"discovery-editorial-tray.*\", source_cluster=\"hs-eks-prod6-api-apse1\", status=\"failure\" }[1m]))",
                "hide": true,
                "interval": "60",
                "legendFormat": "request-failure",
                "refId": "C"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(throttler_request_total{namespace=\"personalisation\", service=\"discovery-editorial-tray.*\", source_cluster=\"hs-eks-prod6-api-apse1\", throttle!=\"online\"}[1m])) / sum(increase(p13n_reco_request_latency_ms_count{namespace=\"personalisation\", source_cluster=\"hs-eks-prod6-api-apse1\", service=\"discovery-editorial-tray.*\"}[1m]))",
                "hide": true,
                "interval": "60",
                "legendFormat": "request-throttled-rate",
                "refId": "D"
              }
            ],
            "thresholds": [
              {
                "colorMode": "critical",
                "fill": false,
                "line": false,
                "op": "gt",
                "value": 200,
                "visible": true
              }
            ],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "RPC Volume [Alert]",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:502",
                "decimals": 0,
                "format": "rpm",
                "label": "request count per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:503",
                "decimals": 0,
                "format": "short",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "alert": {
              "alertRuleTags": {},
              "conditions": [
                {
                  "evaluator": {
                    "params": [
                      250
                    ],
                    "type": "gt"
                  },
                  "operator": {
                    "type": "and"
                  },
                  "query": {
                    "params": [
                      "D",
                      "1m",
                      "now"
                    ]
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                }
              ],
              "executionErrorState": "keep_state",
              "for": "5m",
              "frequency": "1m",
              "handler": 1,
              "message": "Global Deployment Editorial Tray Service rpc p99 latency is higher than 200ms",
              "name": "RPC Latency alert",
              "noDataState": "keep_state",
              "notifications": [
                {
                  "uid": "mI81hOXMk"
                },
                {
                  "uid": "-PsqDaZIk"
                }
              ]
            },
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 8
            },
            "hiddenSeries": false,
            "id": 91,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": false
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9999, sum(rate(p13n_reco_request_latency_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p9999",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(p13n_reco_request_latency_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p99",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.50, sum(rate(p13n_reco_request_latency_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p50",
                "refId": "C"
              },
              {
                "exemplar": true,
                "expr": "max(histogram_quantile(0.99, sum(rate(p13n_reco_request_latency_ms_bucket{namespace=\"personalisation\", service=\"discovery-editorial-tray.*\", source_cluster=\"hs-eks-prod6-api-apse1\"}[1m])) by (namespace, service, le)))",
                "hide": true,
                "interval": "60",
                "legendFormat": "p99-alert",
                "refId": "D"
              }
            ],
            "thresholds": [
              {
                "colorMode": "critical",
                "fill": false,
                "line": false,
                "op": "gt",
                "value": 250,
                "visible": true
              }
            ],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "RPC Latency [Alert]",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:254",
                "decimals": null,
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:255",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 16
            },
            "hiddenSeries": false,
            "id": 93,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": false
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "displayType": "Regular",
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_step_latency_ms_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (step)",
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{step}}",
                "queryType": "randomWalk",
                "refId": "A",
                "valueHandler": "Number Threshold"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "RPC Server Step Volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "transformations": [],
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "rpm",
                "label": "count per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "fetch_feature-p99": "dark-purple"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 16
            },
            "hiddenSeries": false,
            "id": 95,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(p13n_reco_step_latency_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le, step))",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{step}}-p99",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.5, sum(rate(p13n_reco_step_latency_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le, step))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{step}}-p50",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Latency Breakdown",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": null,
                "format": "ms",
                "label": "",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 24
            },
            "hiddenSeries": false,
            "id": 151,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(circuit_breaker_latency_milliseconds_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (name, success)",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{name}}-{{success}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "External Service Request Volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 24
            },
            "hiddenSeries": false,
            "id": 153,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le, name))",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{name}}-p99",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le, name))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{name}}-p90",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9999, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le, name))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{name}}-p9999",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "External Service Latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "alert": {
              "alertRuleTags": {},
              "conditions": [
                {
                  "evaluator": {
                    "params": [
                      0.5
                    ],
                    "type": "gt"
                  },
                  "operator": {
                    "type": "and"
                  },
                  "query": {
                    "params": [
                      "C",
                      "1m",
                      "now"
                    ]
                  },
                  "reducer": {
                    "params": [],
                    "type": "max"
                  },
                  "type": "query"
                }
              ],
              "executionErrorState": "keep_state",
              "for": "20m",
              "frequency": "1m",
              "handler": 1,
              "message": "Global Deployment Editorial Tray Service triggered circuit open",
              "name": "Editorial-Tray-Service-Circuit-Open alert",
              "noDataState": "ok",
              "notifications": [
                {
                  "uid": "mI81hOXMk"
                },
                {
                  "uid": "-PsqDaZIk"
                }
              ]
            },
            "aliasColors": {},
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 32
            },
            "hiddenSeries": false,
            "id": 101,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": false
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(circuit_breaker_open_status{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}) by(name)",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{name}}",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "sum(circuit_breaker_open_status{namespace=\"personalisation\", service=\"discovery-editorial-tray.*\", source_cluster=\"hs-eks-prod6-api-apse1\"})",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "Total(prod)",
                "refId": "C"
              }
            ],
            "thresholds": [
              {
                "colorMode": "critical",
                "fill": false,
                "line": false,
                "op": "gt",
                "value": 0.5,
                "visible": true
              }
            ],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Editorial Tray Service Circuit Open (stacked) [Alert]",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1462",
                "decimals": 0,
                "format": "short",
                "label": "number of errors",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:1463",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "alert": {
              "alertRuleTags": {},
              "conditions": [
                {
                  "evaluator": {
                    "params": [
                      200
                    ],
                    "type": "gt"
                  },
                  "operator": {
                    "type": "and"
                  },
                  "query": {
                    "params": [
                      "B",
                      "5m",
                      "now"
                    ]
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                }
              ],
              "executionErrorState": "alerting",
              "for": "5m",
              "frequency": "1m",
              "handler": 1,
              "message": "Global Deployment Editorial Tray Service gets too many request cancelled",
              "name": "Controller Exception",
              "noDataState": "keep_state",
              "notifications": [
                {
                  "uid": "mI81hOXMk"
                },
                {
                  "uid": "-PsqDaZIk"
                }
              ]
            },
            "aliasColors": {
              "response-StatusRuntimeException": "red"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 32
            },
            "hiddenSeries": false,
            "id": 103,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum by (name, component) (increase(controller_exception_count_total{job=~\"$service.*\",namespace=\"$namespace\",source_cluster=\"$cluster\"}[1m]))",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{component}}-{{name}}",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(controller_exception_count_total{job=~\"discovery-editorial-tray.*\",namespace=\"personalisation\",source_cluster=\"hs-eks-prod6-api-apse1\"}[1m]))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "exception-alert",
                "refId": "B"
              }
            ],
            "thresholds": [
              {
                "colorMode": "critical",
                "fill": true,
                "line": true,
                "op": "gt",
                "value": 200,
                "visible": true
              }
            ],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Controller Exception Count (stacked) [Alert]",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": 0,
                "format": "short",
                "label": "number of exceptions",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 40
            },
            "hiddenSeries": false,
            "id": 182,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.50, sum(rate(p13n_reco_tpfy_tensorflow_algorithm_predict_time_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le, stage))",
                "interval": "60",
                "legendFormat": "P50-{{stage}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Step Latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1458",
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:1459",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 40
            },
            "hiddenSeries": false,
            "id": 188,
            "legend": {
              "alignAsTable": true,
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum by (exp) (increase(p13n_reco_ab_hit_count_total{namespace=\"$namespace\",service=\"$service\",source_cluster=\"$cluster\"}[1m]))",
                "interval": "60",
                "legendFormat": "{{exp}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "AB Experiment(stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:94",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:95",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "alert": {
              "alertRuleTags": {},
              "conditions": [
                {
                  "evaluator": {
                    "params": [
                      15
                    ],
                    "type": "gt"
                  },
                  "operator": {
                    "type": "and"
                  },
                  "query": {
                    "params": [
                      "A",
                      "5m",
                      "now"
                    ]
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                }
              ],
              "executionErrorState": "alerting",
              "for": "5m",
              "frequency": "1m",
              "handler": 1,
              "name": "Pods Count alert",
              "noDataState": "no_data",
              "notifications": []
            },
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 48
            },
            "hiddenSeries": false,
            "id": 198,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(kube_pod_status_phase{namespace=\"personalisation\", pod=~\"discovery-editorial-tray.*\", source_cluster=\"hs-eks-prod6-api-apse1\"}) by (source_cluster)",
                "interval": "60",
                "legendFormat": "apse1-0",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [
              {
                "colorMode": "critical",
                "fill": true,
                "line": true,
                "op": "gt",
                "value": 15,
                "visible": true
              }
            ],
            "timeRegions": [],
            "title": "Pods Count",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:361",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:362",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "title": "RPC",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 8
        },
        "id": 149,
        "maxDataPoints": 1360,
        "panels": [
          {
            "aliasColors": {
              "ab-fail": "red",
              "ab-false": "red",
              "ab-success": "green",
              "redis-fail": "semi-dark-red",
              "redis-success": "semi-dark-green",
              "tpfy-fail": "dark-red",
              "tpfy-success": "semi-dark-green",
              "watch_history-fail": "light-red",
              "watch_history-success": "light-green"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 9
            },
            "hiddenSeries": false,
            "id": 97,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(circuit_breaker_latency_milliseconds_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"ab\"}[1m])) by (success)",
                "format": "time_series",
                "hide": false,
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "ab-{{success}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "AB Request Volume (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:90",
                "decimals": 0,
                "format": "rpm",
                "label": "request count per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:91",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 9
            },
            "hiddenSeries": false,
            "id": 143,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"ab\"}[1m])) by (le))",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "ab-p99",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"ab\"}[1m])) by (le))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "ab-p90",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9999, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"ab\"}[1m])) by (le))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "ab-p9999",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "AB Latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:170",
                "decimals": null,
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:171",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "ab-fail": "red",
              "ab-false": "red",
              "ab-success": "green",
              "redis-fail": "semi-dark-red",
              "redis-success": "semi-dark-green",
              "tpfy-fail": "dark-red",
              "tpfy-success": "semi-dark-green",
              "watch_history-fail": "light-red",
              "watch_history-false": "red",
              "watch_history-success": "light-green"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 17
            },
            "hiddenSeries": false,
            "id": 141,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(circuit_breaker_latency_milliseconds_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"feature_store_client\"}[1m])) by (success)",
                "format": "time_series",
                "hide": false,
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "feature-store-{{success}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Watch History Request Volume (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:250",
                "decimals": 0,
                "format": "rpm",
                "label": "request count per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:251",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 17
            },
            "hiddenSeries": false,
            "id": 147,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"feature_store_client\"}[1m])) by (le))",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "feature-store-p99",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"feature_store_client\"}[1m])) by (le))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "feature-store-p90",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9999, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"feature_store_client\"}[1m])) by (le))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "feature-store-p9999",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Feature Store Latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:408",
                "decimals": null,
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:409",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "ab-fail": "red",
              "ab-false": "red",
              "ab-success": "green",
              "redis-fail": "semi-dark-red",
              "redis-false": "red",
              "redis-success": "semi-dark-green",
              "tpfy-fail": "dark-red",
              "tpfy-success": "semi-dark-green",
              "watch_history-fail": "light-red",
              "watch_history-success": "light-green"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 25
            },
            "hiddenSeries": false,
            "id": 139,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(circuit_breaker_latency_milliseconds_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"redis\"}[1m])) by (success)",
                "format": "time_series",
                "hide": false,
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "redis-{{success}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Redis Request Volume (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:328",
                "decimals": 0,
                "format": "rpm",
                "label": "request count per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:329",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 25
            },
            "hiddenSeries": false,
            "id": 145,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "paceLength": 10,
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"redis\"}[1m])) by (le))",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "redis-p99",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"redis\"}[1m])) by (le))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "redis-p90",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9999, sum(rate(circuit_breaker_latency_milliseconds_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"redis\"}[1m])) by (le))",
                "format": "time_series",
                "hide": true,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "redis-p9999",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Redis Latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "decimals": null,
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "title": "External Service",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 9
        },
        "id": 87,
        "maxDataPoints": 1360,
        "panels": [
          {
            "aliasColors": {
              "failure": "red",
              "success": "green"
            },
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 10,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 10
            },
            "hiddenSeries": false,
            "id": 73,
            "legend": {
              "avg": false,
              "current": false,
              "hideEmpty": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": true,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_step_latency_ms_count{namespace=\"$namespace\", service=\"$service\", step=\"fetch_ab\"}[1m])) by (status)",
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{status}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Fetch AB Volume (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:654",
                "decimals": 0,
                "format": "rpm",
                "label": "request count per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:655",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "p99": "super-light-blue"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 10
            },
            "hiddenSeries": false,
            "id": 71,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(p13n_reco_step_latency_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", step=\"fetch_ab\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p99",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.90, sum(rate(p13n_reco_step_latency_ms_bucket{namespace=\"$namespace\", service=\"editorial-tray-svc-$tenant\", source_cluster=\"$cluster\", step=\"fetch_ab\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p90",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.50, sum(rate(p13n_reco_step_latency_ms_bucket{namespace=\"$namespace\", service=\"editorial-tray-svc-$tenant\", source_cluster=\"$cluster\", step=\"fetch_ab\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p50",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Fetch AB Latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:894",
                "decimals": null,
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:895",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": true,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 18
            },
            "hiddenSeries": false,
            "id": 79,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": false,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_step_latency_ms_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", step=\"fetch_feature\"}[1m])) by (status)",
                "interval": "60",
                "intervalFactor": 2,
                "legendFormat": "{{status}}",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Fetch Feature Volume (stacked)",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:732",
                "decimals": 0,
                "format": "rpm",
                "label": "request count per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:733",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 18
            },
            "hiddenSeries": false,
            "id": 81,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(p13n_reco_step_latency_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", step=\"fetch_feature\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p99",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.90, sum(rate(p13n_reco_step_latency_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", step=\"fetch_feature\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p90",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.50, sum(rate(p13n_reco_step_latency_ms_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", step=\"fetch_feature\"}[1m])) by (le))",
                "interval": "60",
                "legendFormat": "p50",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Fetch Feature Latency",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:813",
                "format": "ms",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:814",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "title": "Steps Breakdown",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 10
        },
        "id": 123,
        "maxDataPoints": 1360,
        "panels": [
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 11
            },
            "hiddenSeries": false,
            "id": 107,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_algorithm_predict_total{namespace=\"$namespace\",  service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (algo_type)",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{algo_type}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Algorithm Volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1920",
                "decimals": 0,
                "format": "short",
                "label": "number of prediction",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:1921",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 11
            },
            "hiddenSeries": false,
            "id": 193,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 2,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum by (status) (increase(p13n_reco_editorial_tray_algorithm_result_count_total{namespace=\"$namespace\",service=\"$service\",source_cluster=\"$cluster\"}[1m]))",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "{{status}}",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Algorithm Result Count",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1920",
                "decimals": 0,
                "format": "short",
                "label": "status of algorithm result",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:1921",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 19
            },
            "hiddenSeries": false,
            "id": 115,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "links": [],
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.50, sum(rate(p13n_reco_external_service_items_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"watch.history\"}[1m])) by (le))",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "p50",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(p13n_reco_external_service_items_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"watch.history\"}[1m])) by (le))",
                "format": "time_series",
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "p99",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.9999, sum(rate(p13n_reco_external_service_items_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\", name=\"watch.history\"}[1m])) by (le))",
                "format": "time_series",
                "instant": false,
                "interval": "60",
                "intervalFactor": 1,
                "legendFormat": "p9999",
                "refId": "C"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Watch History Length",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:2003",
                "decimals": 0,
                "format": "short",
                "label": "length of watch history",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:2004",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {
              "predict--ok": "dark-green"
            },
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 0,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 19
            },
            "hiddenSeries": false,
            "id": 109,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_tpfy_tensorflow_algorithm_predict_time_ms_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (stage)",
                "interval": "60",
                "legendFormat": "{{stage}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Simple Reco Algorithm Volume Breakdown",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:2248",
                "decimals": 0,
                "format": "rpm",
                "label": "prediction per minute",
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:2249",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": false
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 27
            },
            "hiddenSeries": false,
            "id": 195,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": false,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": true,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_impr_deranker_deranked_candidate_count_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m]))",
                "interval": "60",
                "legendFormat": "deranker",
                "queryType": "randomWalk",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "sum(increase(p13n_reco_impr_discounter_discounted_candidate_count_count{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m]))",
                "hide": false,
                "interval": "60",
                "legendFormat": "discounter",
                "refId": "B"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Transformed request volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:76",
                "format": "short",
                "label": "requests transformed / min",
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:77",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "Number of candidates transformed within each tray",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 27
            },
            "hiddenSeries": false,
            "id": 196,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.90, sum(rate(p13n_reco_impr_deranker_deranked_candidate_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "hide": false,
                "interval": "60",
                "legendFormat": "[P90] deranked",
                "refId": "A"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.95, sum(rate(p13n_reco_impr_deranker_deranked_candidate_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "hide": false,
                "interval": "60",
                "legendFormat": "[P95] deranked",
                "refId": "B"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(p13n_reco_impr_deranker_deranked_candidate_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "hide": false,
                "interval": "60",
                "legendFormat": "[P99] deranked",
                "refId": "C"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.999, sum(rate(p13n_reco_impr_deranker_deranked_candidate_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "hide": false,
                "interval": "60",
                "legendFormat": "[P999] deranked",
                "refId": "D"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.90, sum(rate(p13n_reco_impr_discounter_discounted_candidate_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "hide": false,
                "interval": "60",
                "legendFormat": "[P90] discounted",
                "refId": "E"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.95, sum(rate(p13n_reco_impr_discounter_discounted_candidate_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "hide": false,
                "interval": "60",
                "legendFormat": "[P95] discounted",
                "refId": "F"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.99, sum(rate(p13n_reco_impr_discounter_discounted_candidate_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "hide": false,
                "interval": "60",
                "legendFormat": "[P99] discounted",
                "refId": "G"
              },
              {
                "exemplar": true,
                "expr": "histogram_quantile(0.999, sum(rate(p13n_reco_impr_discounter_discounted_candidate_count_bucket{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m])) by (le))",
                "hide": false,
                "interval": "60",
                "legendFormat": "[P999] discounted",
                "refId": "H"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Transformed candidate volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:76",
                "format": "short",
                "label": "candidates transformed / request",
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:77",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          },
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "description": "Number of candidates transformed within each tray",
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 35
            },
            "hiddenSeries": false,
            "id": 199,
            "legend": {
              "alignAsTable": true,
              "avg": true,
              "current": false,
              "max": true,
              "min": false,
              "rightSide": true,
              "show": true,
              "total": false,
              "values": true
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum by (country, trayId, count) (increase(p13n_reco_editorial_tray_boosting_candidates_total{namespace=\"$namespace\",service=\"$service\",source_cluster=\"$cluster\"}[1m]))",
                "hide": false,
                "interval": "60",
                "legendFormat": "{{country}}, {{trayId}}, count",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "boosting candidate volume",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:76",
                "format": "short",
                "label": "candidates transformed / request",
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              },
              {
                "$$hashKey": "object:77",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "title": "Algorithms",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 11
        },
        "id": 186,
        "maxDataPoints": 1360,
        "panels": [
          {
            "aliasColors": {},
            "bars": false,
            "dashLength": 10,
            "dashes": false,
            "datasource": {
              "type": "prometheus",
              "uid": "-FPV4La7z"
            },
            "fieldConfig": {
              "defaults": {},
              "overrides": []
            },
            "fill": 1,
            "fillGradient": 0,
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 12
            },
            "hiddenSeries": false,
            "id": 184,
            "legend": {
              "avg": false,
              "current": false,
              "max": false,
              "min": false,
              "show": true,
              "total": false,
              "values": false
            },
            "lines": true,
            "linewidth": 1,
            "maxDataPoints": 1360,
            "nullPointMode": "null",
            "options": {
              "alertThreshold": true
            },
            "percentage": false,
            "pluginVersion": "7.5.17",
            "pointradius": 2,
            "points": false,
            "renderer": "flot",
            "seriesOverrides": [],
            "spaceLength": 10,
            "stack": false,
            "steppedLine": false,
            "targets": [
              {
                "exemplar": true,
                "expr": "sum by (model, slot_id) (increase(p13n_reco_tpfy_missed_fids{namespace=\"$namespace\", service=\"$service\", source_cluster=\"$cluster\"}[1m]))",
                "interval": "60",
                "legendFormat": "{{model}}-{{slot_id}}",
                "queryType": "randomWalk",
                "refId": "A"
              }
            ],
            "thresholds": [],
            "timeFrom": null,
            "timeRegions": [],
            "timeShift": null,
            "title": "Missed Fids",
            "tooltip": {
              "shared": true,
              "sort": 0,
              "value_type": "individual"
            },
            "type": "graph",
            "xaxis": {
              "buckets": null,
              "mode": "time",
              "name": null,
              "show": true,
              "values": []
            },
            "yaxes": [
              {
                "$$hashKey": "object:1975",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": "0",
                "show": true
              },
              {
                "$$hashKey": "object:1976",
                "format": "short",
                "label": null,
                "logBase": 1,
                "max": null,
                "min": null,
                "show": true
              }
            ],
            "yaxis": {
              "align": false,
              "alignLevel": null
            }
          }
        ],
        "title": "Algorithms 2",
        "type": "row"
      }
    ],
    "refresh": false,
    "schemaVersion": 27,
    "style": "dark",
    "tags": [
      "P13N",
      "RECO"
    ],
    "templating": {
      "list": [
        {
          "allValue": null,
          "current": {
            "selected": false,
            "text": "personalisation",
            "value": "personalisation"
          },
          "datasource": {
            "type": "prometheus",
            "uid": "-FPV4La7z"
          },
          "definition": "label_values(kube_namespace_created, namespace)",
          "description": null,
          "error": null,
          "hide": 0,
          "includeAll": false,
          "label": null,
          "multi": false,
          "name": "namespace",
          "options": [],
          "query": {
            "query": "label_values(kube_namespace_created, namespace)",
            "refId": "thanos-namespace-Variable-Query"
          },
          "refresh": 2,
          "regex": "personalisation.*",
          "skipUrlSync": false,
          "sort": 0,
          "tagValuesQuery": "",
          "tags": [],
          "tagsQuery": "",
          "type": "query",
          "useTags": false
        },
        {
          "allValue": null,
          "current": {
            "selected": false,
            "text": "hs-eks-prod6-api-apse1",
            "value": "hs-eks-prod6-api-apse1"
          },
          "datasource": {
            "type": "prometheus",
            "uid": "-FPV4La7z"
          },
          "definition": "label_values(kube_namespace_created, source_cluster)",
          "description": null,
          "error": null,
          "hide": 0,
          "includeAll": false,
          "label": "cluster",
          "multi": false,
          "name": "cluster",
          "options": [],
          "query": {
            "query": "label_values(kube_namespace_created, source_cluster)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 2,
          "regex": "prod-apse1|nonprod|hs.*",
          "skipUrlSync": false,
          "sort": 0,
          "tagValuesQuery": "",
          "tags": [],
          "tagsQuery": "",
          "type": "query",
          "useTags": false
        },
        {
          "allValue": null,
          "current": {
            "selected": false,
            "text": "discovery-editorial-tray-apse1-0",
            "value": "discovery-editorial-tray-apse1-0"
          },
          "description": null,
          "error": null,
          "hide": 0,
          "includeAll": false,
          "label": null,
          "multi": false,
          "name": "service",
          "options": [
            {
              "selected": false,
              "text": "editorial-tray-svc-apse1-0",
              "value": "editorial-tray-svc-apse1-0"
            },
            {
              "selected": false,
              "text": "discovery-editorial-tray",
              "value": "discovery-editorial-tray"
            },
            {
              "selected": true,
              "text": "discovery-editorial-tray-apse1-0",
              "value": "discovery-editorial-tray-apse1-0"
            }
          ],
          "query": "editorial-tray-svc-apse1-0,discovery-editorial-tray,discovery-editorial-tray-apse1-0",
          "queryValue": "",
          "skipUrlSync": false,
          "type": "custom"
        },
        {
          "allValue": null,
          "current": {
            "selected": false,
            "text": "discovery-tf-serving",
            "value": "discovery-tf-serving"
          },
          "description": null,
          "error": null,
          "hide": 0,
          "includeAll": false,
          "label": null,
          "multi": false,
          "name": "tfServingContainer",
          "options": [
            {
              "selected": false,
              "text": "tf-serving-apse1-0",
              "value": "tf-serving-apse1-0"
            },
            {
              "selected": false,
              "text": "tf-serving-apse1-1",
              "value": "tf-serving-apse1-1"
            },
            {
              "selected": false,
              "text": "tf-serving-apse1-2",
              "value": "tf-serving-apse1-2"
            },
            {
              "selected": false,
              "text": "tf-serving-euw1-0",
              "value": "tf-serving-euw1-0"
            },
            {
              "selected": true,
              "text": "discovery-tf-serving",
              "value": "discovery-tf-serving"
            }
          ],
          "query": "tf-serving-apse1-0,tf-serving-apse1-1,tf-serving-apse1-2,tf-serving-euw1-0,discovery-tf-serving",
          "queryValue": "",
          "skipUrlSync": false,
          "type": "custom"
        }
      ]
    },
    "time": {
      "from": "now-15m",
      "to": "now"
    },
    "timepicker": {
      "refresh_intervals": [
        "5s",
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
      ],
      "time_options": [
        "5m",
        "15m",
        "1h",
        "6h",
        "12h",
        "24h",
        "2d",
        "7d",
        "30d"
      ]
    },
    "timezone": "",
    "title": "Editorial Tray I18N",
    "uid": "0A28A34x",
    "version": 1
  },
  "folderUid": "c2ab6eb8-5670-49a2-a829-76201c7e16bf",
  "overwrite": true
}
